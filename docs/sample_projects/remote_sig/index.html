



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A collection of tutorial pages for SCION">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>SCIONLab SIG testing - SCION Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.e8d24b3b.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#the-scion-ip-gateway-application" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="SCION Tutorials" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SCION Tutorials
              </span>
              <span class="md-header-nav__topic">
                SCIONLab SIG testing
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="SCION Tutorials" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SCION Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      How to run SCION VM
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        How to run SCION VM
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../virtual_machine_setup/dynamic_ip/" title="Virtual machine with VPN" class="md-nav__link">
      Virtual machine with VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../virtual_machine_setup/static_ip/" title="Virtual machine with static public IP" class="md-nav__link">
      Virtual machine with static public IP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How to install SCION manually on different platforms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How to install SCION manually on different platforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/ubuntu_x86_build/" title="Ubuntu 16.04 x86-64" class="md-nav__link">
      Ubuntu 16.04 x86-64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/rpi_ubuntu/" title="Ubuntu MATE Raspberry PI" class="md-nav__link">
      Ubuntu MATE Raspberry PI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/image_builder/" title="Images for ARM minicomputers" class="md-nav__link">
      Images for ARM minicomputers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/android/" title="Android devices" class="md-nav__link">
      Android devices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Connecting to SCION
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Connecting to SCION
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/local_top/" title="Running SCION on a local topology" class="md-nav__link">
      Running SCION on a local topology
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/public_ip/" title="Set up an AS and connect to the SCION network" class="md-nav__link">
      Set up an AS and connect to the SCION network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/public_ip_nat/" title="Set up an AS and connect to the SCION network behind a NAT" class="md-nav__link">
      Set up an AS and connect to the SCION network behind a NAT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/vpn_setup/" title="Set up an AS and connect to the SCION network via VPN" class="md-nav__link">
      Set up an AS and connect to the SCION network via VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/setup_endhost/" title="Set up SCION endhost and connect to local AS" class="md-nav__link">
      Set up SCION endhost and connect to local AS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/join_infrastructure/" title="How to join the SCIONLab Infrastructure" class="md-nav__link">
      How to join the SCIONLab Infrastructure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      How to use
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        How to use
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fetch_sensor_readings/" title="Read a temperature sensor over the SCION network" class="md-nav__link">
      Read a temperature sensor over the SCION network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../access_camera/" title="Access a video camera over the SCION network" class="md-nav__link">
      Access a video camera over the SCION network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bwtester/" title="Bandwidth tester application" class="md-nav__link">
      Bandwidth tester application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../as_visualization/webapp/" title="SCIONLab Apps Web Visualization" class="md-nav__link">
      SCIONLab Apps Web Visualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../as_visualization/running_asviz/" title="Running AS Visualizations" class="md-nav__link">
      Running AS Visualizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../as_visualization/browser_asviz/" title="Browser AS Visualization" class="md-nav__link">
      Browser AS Visualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../as_visualization/command_asviz/" title="Command-line AS Visualization" class="md-nav__link">
      Command-line AS Visualization
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        SCIONLab SIG testing
      </label>
    
    <a href="./" title="SCIONLab SIG testing" class="md-nav__link md-nav__link--active">
      SCIONLab SIG testing
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-two-sigs" title="Configuring the two SIGs" class="md-nav__link">
    Configuring the two SIGs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      SCION tips and tricks
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        SCION tips and tricks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/verifying_scion_installation/" title="Verifying the installation" class="md-nav__link">
      Verifying the installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scion_tricks/setup_startup/" title="Running SCION on system boot" class="md-nav__link">
      Running SCION on system boot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scion_tricks/changing_gen_dir/" title="Updating gen directory" class="md-nav__link">
      Updating gen directory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scion_tricks/updating_scion/" title="Updating SCION" class="md-nav__link">
      Updating SCION
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scion_tricks/wireshark/" title="Adding Wireshark dissector" class="md-nav__link">
      Adding Wireshark dissector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      SCION box
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        SCION box
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../scionbox/scionbox/" title="SCION box first steps" class="md-nav__link">
      SCION box first steps
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-two-sigs" title="Configuring the two SIGs" class="md-nav__link">
    Configuring the two SIGs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="the-scion-ip-gateway-application">The SCION IP Gateway application<a class="headerlink" href="#the-scion-ip-gateway-application" title="Permanent link">&para;</a></h1>
<p>The <a href="https://github.com/netsec-ethz/netsec-scion/tree/scionlab/go/sig">SCION IP Gateway <code>SIG</code></a> enables legacy IP applications to communicate over SCION. This tutorial describes how to set up two SIGs locally to test the SIG can enable any IP application to communicate over SCION.</p>
<h2 id="environment">Environment<a class="headerlink" href="#environment" title="Permanent link">&para;</a></h2>
<p>To test the SIG we will make use of the Vagrant configurations provided on <a href="https://scionlab.org/#/login">scionlab.org</a>.
Login to your account and use the button <code>Generate a new SCIONLab AS</code>.
Download the configuration and unpack it to your test directory.</p>
<p>Go to your test directory and run:</p>
<pre class="codehilite"><code class="language-shell">vagrant up</code></pre>


<p>After the initial configuration of the VM, you can ssh into it with</p>
<pre class="codehilite"><code class="language-shell">vagrant ssh</code></pre>


<p>Inside the VM:</p>
<pre class="codehilite"><code class="language-shell">cd $SC; ./scion.sh run</code></pre>


<p>SCION is now running on host A.</p>
<p>Do the same for a second host B.</p>
<h2 id="configuring-the-two-sigs">Configuring the two SIGs<a class="headerlink" href="#configuring-the-two-sigs" title="Permanent link">&para;</a></h2>
<p>We will now create the configuration for two SIG instances, one on the AS you started on host A <code>AS A</code> which we will call sigA and one on host B in <code>AS B</code>, which we will call sigB.
Create the configuration directories for the SIGs, build the SIG binary and set the linux capabilities on the binary:</p>
<pre class="codehilite"><code class="language-shell">export IA=$(cat $SC/gen/ia)
export IAd=$(cat $SC/gen/ia | sed 's/_/\:/g')
export AS=$(cat $SC/gen/ia | cut --fields=2 --delimiter=&quot;-&quot;)
export ISD=$(cat $SC/gen/ia | cut --fields=1 --delimiter=&quot;-&quot;)
mkdir -p ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/
go build -o ${SC}/bin/sig ${SC}/go/sig/main.go
sudo setcap cap_net_admin+eip ${SC}/bin/sig</code></pre>


<p>Enable routing:</p>
<pre class="codehilite"><code class="language-shell">sudo sysctl net.ipv4.conf.default.rp_filter=0
sudo sysctl net.ipv4.conf.all.rp_filter=0
sudo sysctl net.ipv4.ip_forward=1</code></pre>


<p>Create the configuration for the sigA at ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config:</p>
<p>(You need to replace ${AS}, ${IA} and ${IAd} with the actual values on your system in these configuration files.)</p>
<pre class="codehilite"><code>[sig]
  # ID of the SIG (required)
  ID = &quot;sigA&quot;

  # The SIG config json file. (required)
  SIGConfig = &quot;/home/ubuntu/go/src/github.com/scionproto/scion/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.json&quot;

  # The local IA (required)
  IA = &quot;${IAd}&quot;

  # The bind IP address (required)
  IP = &quot;172.16.0.11&quot;

  # Control data port, e.g. keepalives. (default 10081)
  CtrlPort = 10081

  # Encapsulation data port. (default 10080)
  EncapPort = 10080

  # SCION dispatcher path. (default &quot;&quot;)
  Dispatcher = &quot;&quot;

  # Name of TUN device to create. (default DefaultTunName)
  Tun = &quot;sigA&quot;

  # Id of the routing table (default 11)
  TunRTableId = 11

[sd_client]
  # Sciond path. It defaults to sciond.DefaultSCIONDPath.
  Path = &quot;/run/shm/sciond/default.sock&quot;

  # Maximum time spent attempting to connect to sciond on start. (default 20s)
  InitialConnectPeriod = &quot;20s&quot;

[logging]
[logging.file]
  # Location of the logging file.
  Path = &quot;/home/ubuntu/go/src/github.com/scionproto/scion/logs/sig${IA}-1.log&quot;

  # File logging level (trace|debug|info|warn|error|crit) (default debug)
  Level = &quot;debug&quot;

  # Max size of log file in MiB (default 50)
  # Size = 50

  # Max age of log file in days (default 7)
  # MaxAge = 7

  # How frequently to flush to the log file, in seconds. If 0, all messages
  # are immediately flushed. If negative, messages are never flushed
  # automatically. (default 5)
  FlushInterval = 5
[logging.console]
  # Console logging level (trace|debug|info|warn|error|crit) (default crit)
  Level = &quot;debug&quot;

[metrics]
# The address to export prometheus metrics on. (default 127.0.0.1:1281)
  Prometheus = &quot;127.0.0.1:1282&quot;</code></pre>


<p>You can do so with the following command:</p>
<pre class="codehilite"><code class="language-shell">sed -i &quot;s/\${IA}/${IA}/g&quot; ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config
sed -i &quot;s/\${IAd}/${IAd}/g&quot; ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config
sed -i &quot;s/\${AS}/${AS}/g&quot; ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config
sed -i &quot;s/\${ISD}/${ISD}/g&quot; ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config</code></pre>


<p>Create the traffic rules for the sigA at ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.json:</p>
<pre class="codehilite"><code>{
    &quot;ASes&quot;: {
        &quot;17-ffaa:1:XXX&quot;: {
            &quot;Nets&quot;: [
                &quot;172.16.11.0/24&quot;
            ],
            &quot;Sigs&quot;: {
                &quot;remote-1&quot;: {
                    &quot;Addr&quot;: &quot;10.0.8.XXX&quot;,
                    &quot;CtrlPort&quot;: 10084,
                    &quot;EncapPort&quot;: 10083
                }
            }
        }
    },
    &quot;ConfigVersion&quot;: 9001
}</code></pre>


<p>You need to replace the "10.0.8.XXX" IP with the actual IP of the remote host B and 17-ffaa:1:XXX with the AS id of the remote AS B.</p>
<p>And similarly the configuration and traffic rules for the sigB:</p>
<p>at ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigB.config</p>
<pre class="codehilite"><code>[sig]
  # ID of the SIG (required)
  ID = &quot;sigB&quot;

  # The SIG config json file. (required)
  SIGConfig = &quot;/home/ubuntu/go/src/github.com/scionproto/scion/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigB.json&quot;

  # The local IA (required)
  IA = &quot;${IAd}&quot;

  # The bind IP address (required)
  IP = &quot;172.16.0.12&quot;

  # Control data port, e.g. keepalives. (default 10081)
  CtrlPort = 10084

  # Encapsulation data port. (default 10080)
  EncapPort = 10083

  # SCION dispatcher path. (default &quot;&quot;)
  Dispatcher = &quot;&quot;

  # Name of TUN device to create. (default DefaultTunName)
  Tun = &quot;sigB&quot;

  # Id of the routing table (default 11)
  TunRTableId = 12

[sd_client]
  # Sciond path. It defaults to sciond.DefaultSCIONDPath.
  Path = &quot;/run/shm/sciond/default.sock&quot;

  # Maximum time spent attempting to connect to sciond on start. (default 20s)
  InitialConnectPeriod = &quot;20s&quot;

[logging]
[logging.file]
  # Location of the logging file.
  Path = &quot;/home/ubuntu/go/src/github.com/scionproto/scion/logs/sig${IA}-1.log&quot;

  # File logging level (trace|debug|info|warn|error|crit) (default debug)
  Level = &quot;debug&quot;

  # Max size of log file in MiB (default 50)
  # Size = 50

  # Max age of log file in days (default 7)
  # MaxAge = 7

  # How frequently to flush to the log file, in seconds. If 0, all messages
  # are immediately flushed. If negative, messages are never flushed
  # automatically. (default 5)
  FlushInterval = 5
[logging.console]
  # Console logging level (trace|debug|info|warn|error|crit) (default crit)
  Level = &quot;debug&quot;

[metrics]
# The address to export prometheus metrics on. (default 127.0.0.1:1281)
  Prometheus = &quot;127.0.0.1:1282&quot;</code></pre>


<p>and </p>
<p>at ${SC}/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigB.json</p>
<pre class="codehilite"><code>{
    &quot;ASes&quot;: {
        &quot;${IAd}&quot;: {
            &quot;Nets&quot;: [
                &quot;172.16.12.0/24&quot;
            ],
            &quot;Sigs&quot;: {
                &quot;remote-1&quot;: {
                    &quot;Addr&quot;: &quot;10.0.8.XXX&quot;,
                    &quot;CtrlPort&quot;: 10081,
                    &quot;EncapPort&quot;: 10080
                }
            }
        }
    },
    &quot;ConfigVersion&quot;: 9001
}</code></pre>


<p>You need to replace the "10.0.8.XXX" IP with the actual IP of the remote host A.</p>
<p>Since we are running our SIGs in a VM and we do not have spare physical interfaces on which to run them, we will create two dummy interfaces:</p>
<pre class="codehilite"><code class="language-shell">sudo modprobe dummy</code></pre>


<p>On host A:</p>
<pre class="codehilite"><code class="language-shell">sudo ip link set name dummy11 dev dummy0
sudo ip addr add 172.16.0.11/32 brd + dev dummy11 label dummy11:0</code></pre>


<p>On host B:</p>
<pre class="codehilite"><code>sudo ip link add dummy12 type dummy
sudo ip addr add 172.16.0.12/32 brd + dev dummy12 label dummy12:0</code></pre>


<p>Now we need to add the routing rules for the two SIGs:</p>
<p>On host A:</p>
<pre class="codehilite"><code class="language-shell">sudo ip rule add to 172.16.12.0/24 lookup 11 prio 11</code></pre>


<p>On host B:</p>
<pre class="codehilite"><code class="language-shell">sudo ip rule add to 172.16.11.0/24 lookup 12 prio 12</code></pre>


<p>Now start the two SIGs with the following commands:</p>
<p>On Host A:</p>
<pre class="codehilite"><code class="language-shell">$SC/bin/sig -config=/home/ubuntu/go/src/github.com/scionproto/scion/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigA.config &gt; $SC/logs/sig${IA}-1.log 2&gt;&amp;1 &amp;</code></pre>


<p>and Host B:</p>
<pre class="codehilite"><code class="language-shell">$SC/bin/sig -config=/home/ubuntu/go/src/github.com/scionproto/scion/gen/ISD${ISD}/AS${AS}/sig${IA}-1/sigB.config &gt; $SC/logs/sig${IA}-1.log 2&gt;&amp;1 &amp;</code></pre>


<p>To show the ip rules and routes, run:</p>
<pre class="codehilite"><code class="language-shell">sudo ip rule show
sudo ip route show table 11
sudo ip route show table 12</code></pre>


<p>Add some server on host B and client on host A:</p>
<p>Host B:</p>
<pre class="codehilite"><code class="language-shell">sudo ip link add server type dummy
sudo ip addr add 172.16.12.1/24 brd + dev server label server:0

mkdir $SC/WWW
echo &quot;Hello World!&quot; &gt; $SC/WWW/hello.html
cd $SC/WWW/ &amp;&amp; python3 -m http.server --bind 172.16.12.1 8081 &amp;</code></pre>


<p>Host A:</p>
<pre class="codehilite"><code class="language-shell">sudo ip link add client type dummy
sudo ip addr add 172.16.11.1/24 brd + dev client label client:0</code></pre>


<p>Query the server running on host B from host A:</p>
<p>Host A:</p>
<pre class="codehilite"><code class="language-shell">curl --interface 172.16.11.1 172.16.12.1:8081/hello.html</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy 2018, Network Security Group, ETH Zurich
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://www.scion-architecture.net/" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/netsec-ethz/" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.67a6a1d1.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>